"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4711],{6744:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>d});var r=i(4848),t=i(8453);const s={sidebar_position:5},o="Enabling LLM Guardrails",a={id:"tutorials/enabling_llm_guardrails",title:"Enabling LLM Guardrails",description:"LLM guardrails are an important feature in the xRx system that help ensure the safety and reliability of AI interactions. This guide will walk you through the process of enabling and configuring LLM guardrails for your xRx deployment.",source:"@site/content/tutorials/enabling_llm_guardrails.md",sourceDirName:"tutorials",slug:"/tutorials/enabling_llm_guardrails",permalink:"/xrx-core/docs/tutorials/enabling_llm_guardrails",draft:!1,unlisted:!1,editUrl:"https://github.com/8090-inc/xrx-core/blob/HEAD/docs/content/tutorials/enabling_llm_guardrails.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Build Your Own Reasoning Application",permalink:"/xrx-core/docs/tutorials/bring_your_own_reasoning_agent"},next:{title:"Enabling LLM Observability",permalink:"/xrx-core/docs/tutorials/setting_up_llm_observability"}},l={},d=[{value:"Overview",id:"overview",level:2},{value:"Setup",id:"setup",level:2},{value:"Advanced Configuration",id:"advanced-configuration",level:2},{value:"Monitoring specific fields",id:"monitoring-specific-fields",level:3},{value:"Customized guardrails",id:"customized-guardrails",level:3}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"enabling-llm-guardrails",children:"Enabling LLM Guardrails"}),"\n",(0,r.jsx)(n.p,{children:"LLM guardrails are an important feature in the xRx system that help ensure the safety and reliability of AI interactions. This guide will walk you through the process of enabling and configuring LLM guardrails for your xRx deployment."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(n.p,{children:"The xRx system uses a Guardrails Proxy to implement safety measures for input and output processing. This proxy acts as an intermediary between the orchestrator and the reasoning agent, applying various checks such as toxic language detection."}),"\n",(0,r.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,r.jsx)(n.p,{children:"To enable LLM guardrails, you need to configure the orchestrator to use the Guardrails Proxy instead of connecting directly to the reasoning agent. Here's how to do it:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open the ",(0,r.jsx)(n.code,{children:".env"})," file in the root directory of your project."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsxs)(n.em,{children:["If you don't have a ",(0,r.jsx)(n.code,{children:".env"})," file, you will need to create one in the root directory of your project with the necessary environment variables. ",(0,r.jsx)(n.a,{href:"https://github.com/8090-inc/xrx/blob/main/config/env-examples/env.guardrails",children:"Here"})," is an example of an ",(0,r.jsx)(n.code,{children:".env"})," file with the required variables set."]})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Update or add the following environment variables:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'AGENT_HOST="xrx-guardrails"\nAGENT_PORT="8094"\nGUARDRAILS_AGENT_HOST="xrx-reasoning"\nGUARDRAILS_AGENT_PORT="8003"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["This configuration tells the orchestrator to connect to the Guardrails Proxy (",(0,r.jsx)(n.code,{children:"xrx-guardrails"}),") instead of the reasoning agent directly. It also specifies the host and port for the actual reasoning agent (",(0,r.jsx)(n.code,{children:"xrx-reasoning"}),") that the Guardrails Proxy will communicate with."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Save the ",(0,r.jsx)(n.code,{children:".env"})," file."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"To apply these changes, rebuild and restart your containers:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker compose up --build\n"})}),"\n",(0,r.jsx)(n.h2,{id:"advanced-configuration",children:"Advanced Configuration"}),"\n",(0,r.jsx)(n.h3,{id:"monitoring-specific-fields",children:"Monitoring specific fields"}),"\n",(0,r.jsx)(n.p,{children:"The Guardrails Proxy can be configured to monitor specific endpoints and apply different checks. To customize the guardrails:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Open the ",(0,r.jsx)(n.code,{children:"guardrails-proxy/app/main.py"})," file."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Locate the ",(0,r.jsx)(n.code,{children:"MONITOR_CONFIG"})," dictionary. This defines which endpoints are monitored and how to extract content for validation."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Modify or add entries to suit your API structure. For example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:' MONITOR_CONFIG = {\n     "my-custom-endpoint": {\n         "input_keys": {\n             "messages": {\n                 "type": "list",\n                 "list_index": -1,\n                 "items": {\n                     "type": "object",\n                     "field": "content",\n                 }\n             }\n         }\n     }\n }\n'})}),"\n",(0,r.jsx)(n.p,{children:'This configuration tells the proxy to monitor the input body of "my-custom-endpoint" endpoint, extract content from the last message in the input request, and apply guardrails to the "content" field of the response.'}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"customized-guardrails",children:"Customized guardrails"}),"\n",(0,r.jsx)(n.p,{children:"For more advanced guardrails or custom checks, you can:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["To add or modify guardrails, edit the ",(0,r.jsx)(n.code,{children:"guardrails-proxy/app/guard.py"})," file. You can chain multiple guardrails using the ",(0,r.jsx)(n.code,{children:"Guard().use_many()"})," method."]}),"\n",(0,r.jsxs)(n.li,{children:["Implement additional guardrail models from the ",(0,r.jsx)(n.a,{href:"https://hub.guardrailsai.com",children:"Guardrails AI Hub"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:["Create custom guardrail classes in the ",(0,r.jsx)(n.code,{children:"guard.py"})," file."]}),"\n",(0,r.jsxs)(n.li,{children:["Adjust the proxy's behavior in ",(0,r.jsx)(n.code,{children:"main.py"})," to handle different types of requests or responses."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"By following these steps, you can effectively enable and customize LLM guardrails in your xRx system, enhancing the safety and reliability of your AI interactions."})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>a});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);